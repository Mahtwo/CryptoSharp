<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>D:\WINDOWS\Documents\GitHub\CryptoSharp\CryptoSharp\EncodeDecode.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
namespace CryptoSharp
{
    /// &lt;summary&gt;
    /// Class who manage encode and decode message alphabet char to int and int to alphabet char.
    /// &lt;/summary&gt;
    public class EncodeDecode
    {
        /// &lt;summary&gt;
        /// Methode to encode a message with a key generated by solitaire of Bruce Schneier.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;message&quot;&gt;string message to encode composed only by letters (a-z)&lt;/param&gt;
        /// &lt;param name=&quot;key&quot;&gt;table of int key who permise to encode the message&lt;/param&gt;
        /// &lt;returns&gt;string encoded message&lt;/returns&gt;
        public static string EncodeMessage(string message, int[] key)
        {
            int[] letters = new int[message.Length];
            for (int i = 0; i &lt; message.Length; i++)
            {
                letters[i] = EncodeDecode.AlphabetToInt(message[i]);
            }

            string encodedMessage = &quot;&quot;;
            for (int i = 0; i &lt; letters.Length; i++)
            {
                int letterValue = letters[i] + key[i];
                if (letterValue &gt; 26)
                {
                    letterValue -= 26;
                }
                encodedMessage += IntToAlphabet(letterValue);
            }
            return encodedMessage;
        }

        /// &lt;summary&gt;
        /// Methode to decode a message with a key generated by solitaire of Bruce Schneier.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;message&quot;&gt;string message to decode composed only by letters (a-z)&lt;/param&gt;
        /// &lt;param name=&quot;key&quot;&gt;table of int key who permise to decode the message&lt;/param&gt;
        /// &lt;returns&gt;string decoded message&lt;/returns&gt;
        public static string DecodeMessage(string message, int[] key)
        {
            int[] letters = new int[message.Length];
            for (int i = 0; i &lt; message.Length; i++)
            {
                letters[i] = EncodeDecode.AlphabetToInt(message[i]);
            }

            string decodedMessage = &quot;&quot;;
            for (int i = 0; i &lt; letters.Length; i++)
            {
                int letterValue = letters[i] - key[i];
                if (letterValue &lt; 1)
                {
                    letterValue += 26;
                }
                decodedMessage += IntToAlphabet(letterValue);
            }
            return decodedMessage;
        }

        /// &lt;summary&gt;
        /// Get the int value of a letter in the alphabet.
        /// For example A = 1, B = 2, C = 3, etc.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;c&quot;&gt;a letter of the alphabet&lt;/param&gt;
        /// &lt;returns&gt;int value of the letter&lt;/returns&gt;
        public static int AlphabetToInt(char c)
        {
            return char.ToUpper(c) - 64;
        }

        /// &lt;summary&gt;
        /// Get the letter of the alphabet from an int value.
        /// For example 1 = A, 2 = B, 3 = C, etc.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;i&quot;&gt;int to transform&lt;/param&gt;
        /// &lt;returns&gt;the letter of the alphabet from int value&lt;/returns&gt;
        public static char IntToAlphabet(int i)
        {
            return (char)(i + 64);
        }
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[15,9,15,10,1],[16,13,16,53,1],[17,18,17,27,1],[17,29,17,47,1],[17,49,17,52,1],[18,13,18,14,1],[19,17,19,69,1],[20,13,20,14,1],[22,13,22,40,1],[23,18,23,27,1],[23,29,23,47,1],[23,49,23,52,1],[24,13,24,14,1],[25,17,25,55,1],[26,17,26,38,1],[27,17,27,18,1],[28,21,28,39,1],[29,17,29,18,1],[30,17,30,62,1],[31,13,31,14,1],[32,13,32,35,1],[33,9,33,10,1],[42,9,42,10,1],[43,13,43,53,1],[44,18,44,27,1],[44,29,44,47,1],[44,49,44,52,1],[45,13,45,14,1],[46,17,46,69,1],[47,13,47,14,1],[49,13,49,40,1],[50,18,50,27,1],[50,29,50,47,1],[50,49,50,52,1],[51,13,51,14,1],[52,17,52,55,1],[53,17,53,37,1],[54,17,54,18,1],[55,21,55,39,1],[56,17,56,18,1],[57,17,57,62,1],[58,13,58,14,1],[59,13,59,35,1],[60,9,60,10,1],[69,9,69,10,1],[70,13,70,41,1],[71,9,71,10,1],[80,9,80,10,1],[81,13,81,35,1],[82,9,82,10,1]]);
    </script>
  </body>
</html>